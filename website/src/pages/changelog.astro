---
import Base from '../layouts/Base.astro';
import { url } from '../config';
---

<Base title="Changelog" description="Release history and version notes for Diddy AIO.">
  <div class="container">
    <div class="breadcrumb">
      <a href={url('/')}>Home</a> / <a href={url('/changelog')}>Changelog</a>
    </div>

    <section class="section">
      <h1>Changelog</h1>
      <p class="section-sub">Release history and version notes.</p>
    </section>

    <section class="section changelog-entry">
      <h2>v1.2.3 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-minor">Patch</span>

      <h3><a href={url('/classes/mage')} class="class-link c-mage">Mage</a></h3>
      <ul class="features">
        <li>Added Freeze action for Water Elemental debuff tracking (fixes Frost nil error)</li>
        <li>Cold Snap now checks both Icy Veins and Water Elemental cooldowns</li>
        <li>Blast Wave and Dragon&rsquo;s Breath now require melee range</li>
        <li>Added Ice Barrier middleware with toggle setting</li>
      </ul>

      <h3><a href={url('/classes/paladin')} class="class-link c-paladin">Paladin</a></h3>
      <ul class="features">
        <li>Added Greater Blessing IDs to buff tracking (no longer overwrites 30-min blessings)</li>
        <li>Added Crusader Aura to aura detection</li>
        <li>Fixed enemy count range to 8yd (Consecration radius)</li>
        <li>Protection: Reordered priorities &mdash; Holy Shield and Seal before Avenger&rsquo;s Shield</li>
      </ul>

      <h3><a href={url('/classes/shaman')} class="class-link c-shaman">Shaman</a></h3>
      <ul class="features">
        <li>Fixed Earth Shock interrupt priority (now highest middleware priority)</li>
        <li>Restoration: Nature&rsquo;s Swiftness now correctly marked as off-GCD</li>
        <li>Elemental: Moved Fire Elemental to lower priority (after core rotation)</li>
        <li>Enhancement: Earth Shock now prioritized during Stormstrike +20% nature debuff</li>
        <li>Enhancement: Added AoE strategy (Fire Nova &gt; Magma &gt; Chain Lightning)</li>
      </ul>

      <h3><a href={url('/classes/warlock')} class="class-link c-warlock">Warlock</a></h3>
      <ul class="features">
        <li>Added useMaxRank to Incinerate, Unstable Affliction, and Shadowfury (fixes R1 casting)</li>
        <li>Removed duplicate IncinerateR2 action</li>
        <li>Affliction: Fixed Curse of Agony clipping (0.5s threshold preserves accelerating ticks)</li>
        <li>Affliction: Moved AoE higher in priority order</li>
        <li>Demonology: Added Fel Domination + pet resummon strategy</li>
        <li>Demonology: Added Soul Link maintenance strategy</li>
      </ul>

      <h3><a href={url('/classes/warrior')} class="class-link c-warrior">Warrior</a></h3>
      <ul class="features">
        <li>Arms: Fixed Sweeping Strikes to be on-GCD (TBC behavior)</li>
        <li>Arms/Fury: Added Thunder Clap and Demoralizing Shout maintenance strategies</li>
        <li>Fury: Rampage now always used when stacks &lt; 5 (builds to max before refresh-only mode)</li>
      </ul>
    </section>

    <section class="section changelog-entry">
      <h2>v1.2.2 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-minor">Patch</span>

      <h3><a href={url('/classes/hunter')} class="class-link c-hunter">Hunter</a></h3>
      <ul class="features">
        <li>Removed Aimed Shot from rotation &mdash; should not be used in standard BM/SV rotations</li>
      </ul>

      <h3><a href={url('/classes/warrior')} class="class-link c-warrior">Warrior</a></h3>
      <ul class="features">
        <li>Arms: Moved Overpower to correct priority (after Sunder Armor maintain, before Slam)</li>
        <li>Fury: Added Overpower minimum rage setting</li>
      </ul>

      <h3><a href={url('/classes/mage')} class="class-link c-mage">Mage</a></h3>
      <ul class="features">
        <li>Arcane: Added Fireball as filler option</li>
        <li>Frost: Fixed frozen target detection to include Water Elemental Freeze</li>
      </ul>

      <h3><a href={url('/classes/paladin')} class="class-link c-paladin">Paladin</a></h3>
      <ul class="features">
        <li>Protection: Moved Avenger&rsquo;s Shield to highest priority for pull/interrupt</li>
        <li>Protection: Righteous Defense now properly respects its toggle setting</li>
      </ul>

      <h3><a href={url('/classes/shaman')} class="class-link c-shaman">Shaman</a></h3>
      <ul class="features">
        <li>Enhancement: Moved Shock priority above Windfury Twist to avoid clipping</li>
        <li>Elemental: Moved Fire Elemental to higher priority</li>
        <li>Elemental: Fixed Chain Lightning clearcast threshold &mdash; now requires fresh 2-charge proc</li>
      </ul>

      <h3><a href={url('/classes/warlock')} class="class-link c-warlock">Warlock</a></h3>
      <ul class="features">
        <li>Fixed Life Tap priority &mdash; now correctly fires after Mana Potion and Dark Rune</li>
      </ul>

      <h3><a href={url('/classes/priest')} class="class-link c-priest">Priest</a></h3>
      <ul class="features">
        <li>Holy: Moved Renew spread before Greater Heal/Flash Heal (instant HoT before cast-time heals)</li>
      </ul>

      <h3><a href={url('/classes/rogue')} class="class-link c-rogue">Rogue</a></h3>
      <ul class="features">
        <li>Feint now checks threat before firing (no longer wastes energy when not tanking)</li>
        <li>Haste Potion now usable on pull for non-Combat specs</li>
      </ul>
    </section>

    <section class="section changelog-entry">
      <h2>v1.2.1 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-minor">Patch</span>

      <h3>Warrior</h3>
      <ul class="features">
        <li>Fixed Fury Rampage refresh logic &mdash; removed redundant stack check, now only refreshes when duration is low (stacks build naturally via refreshes)</li>
      </ul>
    </section>

    <section class="section changelog-entry">
      <h2>v1.2.0 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-major">Major Release</span>

      <h3>6 New Classes</h3>
      <ul class="features">
        <li>Added <a href={url('/classes/paladin')} class="class-link c-paladin">Paladin</a> &mdash; Retribution (seal twisting), Protection (Holy Shield uptime), and Holy (smart party healing)</li>
        <li>Added <a href={url('/classes/priest')} class="class-link c-priest">Priest</a> &mdash; Shadow (DoT management), Smite (Holy Fire weaving), Holy (reactive healing), and Discipline (PW:S prevention)</li>
        <li>Added <a href={url('/classes/rogue')} class="class-link c-rogue">Rogue</a> &mdash; Combat (Blade Flurry/AR), Assassination (Mutilate/Envenom), and Subtlety (Shadowstep burst)</li>
        <li>Added <a href={url('/classes/shaman')} class="class-link c-shaman">Shaman</a> &mdash; Elemental (CL modes), Enhancement (totem twisting), and Restoration (Earth Shield healing)</li>
        <li>Added <a href={url('/classes/warlock')} class="class-link c-warlock">Warlock</a> &mdash; Affliction (full DoT stack), Demonology (Felguard/DS:Ruin), and Destruction (Conflagrate cycle)</li>
        <li>Added <a href={url('/classes/warrior')} class="class-link c-warrior">Warrior</a> &mdash; Arms (MS/Rend), Fury (BT/Rampage), and Protection (Shield Slam/Revenge tanking)</li>
      </ul>

      <h3>All 9 classes now supported with full rotation logic, configurable settings, and spec-specific middleware.</h3>
    </section>

    <section class="section changelog-entry">
      <h2>v1.1.1 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-minor">Patch</span>

      <h3>Settings UI</h3>
      <ul class="features">
        <li>Darkened background colors in the in-game settings panel for improved contrast and readability</li>
      </ul>
    </section>

    <section class="section changelog-entry">
      <h2>v1.1.0 <span class="changelog-date">2026</span></h2>
      <span class="changelog-tag tag-minor">Minor</span>

      <h3>Bear Form</h3>
      <ul class="features">
        <li>Fixed Off-Tank mode tooltip &mdash; correctly states it disables Growl and Challenging Roar (Maul was never affected)</li>
      </ul>
    </section>

    <section class="section changelog-entry">
      <h2>v1.0.0 <span class="changelog-date">2025</span></h2>
      <span class="changelog-tag tag-major">Major Release</span>

      <h3>Multi-Class Architecture</h3>
      <ul class="features">
        <li>Rewritten as a multi-class AIO supporting <a href={url('/classes/druid')} class="class-link c-druid">Druid</a> and <a href={url('/classes/hunter')} class="class-link c-hunter">Hunter</a></li>
        <li>New strategy registry pattern &mdash; middleware (shared) + per-playstyle strategies</li>
        <li>Class registration system with automatic playstyle detection based on current form/stance</li>
        <li>Schema-driven settings &mdash; one schema generates the UI, framework backing store, and cached runtime access</li>
      </ul>

      <h3>Druid</h3>
      <ul class="features">
        <li>5 playstyles: Cat DPS, Bear Tank, Balance Moonkin, Resto Tree, and Caster recovery</li>
        <li>Per-spell cat strategies with energy pooling, combo point tracking, and powershift support</li>
        <li>Wolfshead Helm detection for automatic powershift optimization</li>
        <li>Intelligent heal downranking based on HP deficit and mana efficiency</li>
        <li>Resto/Tree of Life healing with tank prioritization and emergency thresholds</li>
        <li>Balance mana tier system for sustainable Moonkin DPS</li>
        <li>Form-aware automation &mdash; rotation respects current form, suggestion icon recommends shifts</li>
      </ul>

      <h3>Hunter</h3>
      <ul class="features">
        <li>Full ranged DPS rotation with auto-shot clip tracking</li>
        <li>Shot weaving: Steady Shot, Arcane Shot, Multi-Shot with proper clipping prevention</li>
        <li>Sting priority system (Serpent Sting management)</li>
        <li>Pet management with auto-call, health monitoring, and Mend Pet</li>
        <li>Mana-aware aspect switching between Hawk and Viper</li>
        <li>Cooldown management: Bestial Wrath, Rapid Fire, Readiness, Kill Command</li>
        <li>Optional debug overlay for auto-shot timing visualization</li>
      </ul>

      <h3>Infrastructure</h3>
      <ul class="features">
        <li>Monorepo restructure: rotation, website, and Discord bot as separate packages</li>
        <li>New Node.js build system &mdash; auto-discovers class modules, manages load order, compiles to single TMW profile</li>
        <li>File watcher (<code>dev-watch.js</code>) for auto-rebuild and SavedVariables sync during development</li>
        <li>Static website for documentation and distribution</li>
        <li>Discord bot for personalized rotation tweaks via AI</li>
      </ul>
    </section>

  </div>
</Base>
